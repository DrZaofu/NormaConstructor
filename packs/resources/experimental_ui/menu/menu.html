<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <script src="../UIEngine.js"></script>
    <link rel="stylesheet" href="../styles.css" />
</head>

<body>
    <div class="body1">
        <div style='width: 90%;display:flex;flex-direction: row;'>
            <div class="minecraft-container" style='width: 80%;display:flex;flex-direction: column;'>
                <div>
                    <div style="text-align:center;">Admin panel</div>
                    <button id="close" onclick="closeUI()" class="close-button"
                        style="width: 30px;height:30px;text-align: center;padding: 0 0 0 0;">X</button>
                </div>

                <div class="minecraft-container-dark">
                    <div style="display: flex;flex-direction: row;">
                        <button class="button" style="width: 10%;" onclick="selectLastGenerator()">←</button>
                        <button class="button" style="width: 80%;" id="generatorName">NZ IS JULAO</button>
                        <button class="button" style="width: 10%;" onclick="selectNextGenerator()">→</button>
                    </div>
                </div>
            </div>
            <div class="minecraft-container" id="NumPad"
                style='left:12px;width: 20%;display:flex;flex-direction: column;'>
                <div class="minecraft-container-dark">
                    <div>
                        <div style="display: flex;flex-direction: row;justify-content:center;">
                            <button class="button" style="width: 33%;">1</button>
                            <button class="button" style="width: 33%;">2</button>
                            <button class="button" style="width: 33%;">3</button>
                        </div>
                        <div style="display: flex;flex-direction: row;justify-content:center;">
                            <button class="button" style="width: 33%;">4</button>
                            <button class="button" style="width: 33%;">5</button>
                            <button class="button" style="width: 33%;">6</button>
                        </div>
                        <div style="display: flex;flex-direction: row;justify-content:center;">
                            <button class="button" style="width: 33%;">7</button>
                            <button class="button" style="width: 33%;">8</button>
                            <button class="button" style="width: 33%;">9</button>
                        </div>
                        <div style="display: flex;flex-direction: row;justify-content:center;">
                            <button class="button" style="width: 33%;padding: 0 0 0 0;">Del</button>
                            <button class="button" style="width: 33%;padding: 0 0 0 0;">0</button>
                            <button class="button" style="width: 33%;padding: 0 0 0 0;">Ent</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
</body>
<script type="text/javascript">


    let scriptEngineHandle = null;
    engine.on("facet:updated:core.scripting", (scriptEngine) => scriptEngineHandle = scriptEngine);
    engine.trigger("facet:request", ["core.scripting"]);

    let generatorIndex = 0;
    let generatorName = document.getElementById("generatorName")
    let generatorDescription = []

    scriptEngineHandle.triggerEvent(eventDataWrapper({ type: "command", data: "loadDescription" }))

    function eventDataWrapper(data) {
        return "NormaConstructor:" + JSON.stringify(data, null, '    ')
    }
    function displayChat(message) {
        scriptEngineHandle.triggerEvent(eventDataWrapper({ type: "displayChat", data: message }))
    }
    function selectNextGenerator() {
        generatorIndex = (generatorIndex + 1) % generatorDescription.length
        showDescription()
    }
    function selectLastGenerator() {
        generatorIndex = (generatorIndex - 1) % generatorDescription.length
        showDescription()
    }
    function showDescription() {
        generatorName.innerHTML = generatorDescription[generatorIndex].name
    }
    function closeUI() {
        scriptEngineHandle.triggerEvent(eventDataWrapper({ type: "command", data: "closeMenu" }))
    }
    function openNumPad() {
        document.getElementById("NumPad").style.visibility = "visible"
    }
    function closeNumPad() {
        document.getElementById("NumPad").style.visibility = "hidden"
    }

    engine.on("NormaConstructor:loadDescription", (eventData) => {
        generatorDescription = JSON.parse(eventData)
        displayChat(generatorDescription)
        showDescription()
    })
</script>

</html>